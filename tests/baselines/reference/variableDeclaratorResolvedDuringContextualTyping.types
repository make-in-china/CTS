=== tests/cases/compiler/variableDeclaratorResolvedDuringContextualTyping.ts ===
module WinJS {
>WinJS : typeof WinJS

    export interface ValueCallback {
>ValueCallback : ValueCallback

        (value: any): any;
>value : any
>类型别名 :=> 任意
    }

    export interface EventCallback {
>EventCallback : EventCallback

        (value: any): void;
>value : any
>类型别名 :=> 任意
    }

    export interface ErrorCallback {
>ErrorCallback : ErrorCallback

        (error: any): any;
>error : any
>类型别名 :=> 任意
    }

    export interface ProgressCallback {
>ProgressCallback : ProgressCallback

        (progress: any): any;
>progress : any
>类型别名 :=> 任意
    }

    export declare class Promise {
>Promise : Promise

        constructor(init: (complete: ValueCallback, error: ErrorCallback, progress: ProgressCallback) => void, oncancel?: any);
>init : (complete: ValueCallback, error: ErrorCallback, progress: ProgressCallback) => void
>complete : ValueCallback
>ValueCallback : ValueCallback
>error : ErrorCallback
>ErrorCallback : ErrorCallback
>progress : ProgressCallback
>ProgressCallback : ProgressCallback
>oncancel : any
>类型别名 :=> 任意

        static as(value: any): Promise;
>as : (value: any) => Promise
>value : any
>类型别名 :=> 任意
>Promise : Promise

        static join(promises: { [name: string]: Promise; }): Promise;
>join : { (promises: { [name: string]: Promise; }): Promise; (promises: Promise[]): Promise; }
>promises : { [name: string]: Promise; }
>name : string
>类型别名 :=> 文字
>Promise : Promise
>Promise : Promise

        static join(promises: Promise[]): Promise;
>join : { (promises: { [name: string]: Promise; }): Promise; (promises: Promise[]): Promise; }
>promises : Promise[]
>Promise : Promise
>Promise : Promise

        static any(promises: Promise[]): Promise;
>any : (promises: Promise[]) => Promise
>promises : Promise[]
>Promise : Promise
>Promise : Promise

        static timeout(delay: number): Promise;
>timeout : (delay: number) => Promise
>delay : number
>类型别名 :=> 数字
>Promise : Promise

        static wrapError(error: any): Promise;
>wrapError : (error: any) => Promise
>error : any
>类型别名 :=> 任意
>Promise : Promise

        static is(value: any): boolean;
>is : (value: any) => boolean
>value : any
>类型别名 :=> 任意

        static addEventListener(type: string, fn: EventCallback);
>addEventListener : (type: string, fn: EventCallback) => any
>type : string
>类型别名 :=> 文字
>fn : EventCallback
>EventCallback : EventCallback

        public then(success?: ValueCallback, error?: ErrorCallback, progress?: ProgressCallback): Promise;
>then : (success?: ValueCallback, error?: ErrorCallback, progress?: ProgressCallback) => Promise
>success : ValueCallback
>ValueCallback : ValueCallback
>error : ErrorCallback
>ErrorCallback : ErrorCallback
>progress : ProgressCallback
>ProgressCallback : ProgressCallback
>Promise : Promise

        public done(success?: ValueCallback, error?: ErrorCallback, progress?: ProgressCallback): void;
>done : (success?: ValueCallback, error?: ErrorCallback, progress?: ProgressCallback) => void
>success : ValueCallback
>ValueCallback : ValueCallback
>error : ErrorCallback
>ErrorCallback : ErrorCallback
>progress : ProgressCallback
>ProgressCallback : ProgressCallback

        public cancel(): void;
>cancel : () => void
    }

    export declare class TPromise<V> {
>TPromise : TPromise<V>
>V : V

        constructor(init: (complete: (value: V) => void, error: (err: any) => void, progress: ProgressCallback) => void, oncancel?: any);
>init : (complete: (value: V) => void, error: (err: any) => void, progress: ProgressCallback) => void
>complete : (value: V) => void
>value : V
>V : V
>error : (err: any) => void
>err : any
>类型别名 :=> 任意
>progress : ProgressCallback
>ProgressCallback : ProgressCallback
>oncancel : any
>类型别名 :=> 任意

        public then<U>(success?: (value: V) => TPromise<U>, error?: (err: any) => TPromise<U>, progress?: ProgressCallback): TPromise<U>;
>then : { <U>(success?: (value: V) => TPromise<U>, error?: (err: any) => TPromise<U>, progress?: ProgressCallback): TPromise<U>; <U>(success?: (value: V) => TPromise<U>, error?: (err: any) => U, progress?: ProgressCallback): TPromise<U>; <U>(success?: (value: V) => U, error?: (err: any) => TPromise<U>, progress?: ProgressCallback): TPromise<U>; <U>(success?: (value: V) => U, error?: (err: any) => U, progress?: ProgressCallback): TPromise<U>; }
>U : U
>success : (value: V) => TPromise<U>
>value : V
>V : V
>TPromise : TPromise<V>
>U : U
>error : (err: any) => TPromise<U>
>err : any
>类型别名 :=> 任意
>TPromise : TPromise<V>
>U : U
>progress : ProgressCallback
>ProgressCallback : ProgressCallback
>TPromise : TPromise<V>
>U : U

        public then<U>(success?: (value: V) => TPromise<U>, error?: (err: any) => U, progress?: ProgressCallback): TPromise<U>;
>then : { <U>(success?: (value: V) => TPromise<U>, error?: (err: any) => TPromise<U>, progress?: ProgressCallback): TPromise<U>; <U>(success?: (value: V) => TPromise<U>, error?: (err: any) => U, progress?: ProgressCallback): TPromise<U>; <U>(success?: (value: V) => U, error?: (err: any) => TPromise<U>, progress?: ProgressCallback): TPromise<U>; <U>(success?: (value: V) => U, error?: (err: any) => U, progress?: ProgressCallback): TPromise<U>; }
>U : U
>success : (value: V) => TPromise<U>
>value : V
>V : V
>TPromise : TPromise<V>
>U : U
>error : (err: any) => U
>err : any
>类型别名 :=> 任意
>U : U
>progress : ProgressCallback
>ProgressCallback : ProgressCallback
>TPromise : TPromise<V>
>U : U

        public then<U>(success?: (value: V) => U, error?: (err: any) => TPromise<U>, progress?: ProgressCallback): TPromise<U>;
>then : { <U>(success?: (value: V) => TPromise<U>, error?: (err: any) => TPromise<U>, progress?: ProgressCallback): TPromise<U>; <U>(success?: (value: V) => TPromise<U>, error?: (err: any) => U, progress?: ProgressCallback): TPromise<U>; <U>(success?: (value: V) => U, error?: (err: any) => TPromise<U>, progress?: ProgressCallback): TPromise<U>; <U>(success?: (value: V) => U, error?: (err: any) => U, progress?: ProgressCallback): TPromise<U>; }
>U : U
>success : (value: V) => U
>value : V
>V : V
>U : U
>error : (err: any) => TPromise<U>
>err : any
>类型别名 :=> 任意
>TPromise : TPromise<V>
>U : U
>progress : ProgressCallback
>ProgressCallback : ProgressCallback
>TPromise : TPromise<V>
>U : U

        public then<U>(success?: (value: V) => U, error?: (err: any) => U, progress?: ProgressCallback): TPromise<U>;
>then : { <U>(success?: (value: V) => TPromise<U>, error?: (err: any) => TPromise<U>, progress?: ProgressCallback): TPromise<U>; <U>(success?: (value: V) => TPromise<U>, error?: (err: any) => U, progress?: ProgressCallback): TPromise<U>; <U>(success?: (value: V) => U, error?: (err: any) => TPromise<U>, progress?: ProgressCallback): TPromise<U>; <U>(success?: (value: V) => U, error?: (err: any) => U, progress?: ProgressCallback): TPromise<U>; }
>U : U
>success : (value: V) => U
>value : V
>V : V
>U : U
>error : (err: any) => U
>err : any
>类型别名 :=> 任意
>U : U
>progress : ProgressCallback
>ProgressCallback : ProgressCallback
>TPromise : TPromise<V>
>U : U

        public done(success?: (value: V) => void, error?: (err: any) => any, progress?: ProgressCallback): void;
>done : (success?: (value: V) => void, error?: (err: any) => any, progress?: ProgressCallback) => void
>success : (value: V) => void
>value : V
>V : V
>error : (err: any) => any
>err : any
>类型别名 :=> 任意
>progress : ProgressCallback
>ProgressCallback : ProgressCallback

        public cancel(): void;
>cancel : () => void

        public static as<ValueType>(value: ValueType): TPromise<ValueType>;
>as : <ValueType>(value: ValueType) => TPromise<ValueType>
>ValueType : ValueType
>value : ValueType
>ValueType : ValueType
>TPromise : TPromise<V>
>ValueType : ValueType

        public static timeout(delay: number): TPromise<void>;
>timeout : (delay: number) => TPromise<void>
>delay : number
>类型别名 :=> 数字
>TPromise : TPromise<V>

        public static join<ValueType>(promises: TPromise<ValueType>[]): TPromise<ValueType[]>;
>join : <ValueType>(promises: TPromise<ValueType>[]) => TPromise<ValueType[]>
>ValueType : ValueType
>promises : TPromise<ValueType>[]
>TPromise : TPromise<V>
>ValueType : ValueType
>TPromise : TPromise<V>
>ValueType : ValueType

        public static any<ValueType>(promises: TPromise<ValueType>[]): TPromise<ValueType>;
>any : <ValueType>(promises: TPromise<ValueType>[]) => TPromise<ValueType>
>ValueType : ValueType
>promises : TPromise<ValueType>[]
>TPromise : TPromise<V>
>ValueType : ValueType
>TPromise : TPromise<V>
>ValueType : ValueType

        public static wrapError<ValueType>(error: any): TPromise<ValueType>;
>wrapError : <ValueType>(error: any) => TPromise<ValueType>
>ValueType : ValueType
>error : any
>类型别名 :=> 任意
>TPromise : TPromise<V>
>ValueType : ValueType
    }

    export interface IXHROptions {
>IXHROptions : IXHROptions

        type?: string;
>type : string
>类型别名 :=> 文字

        url?: string;
>url : string
>类型别名 :=> 文字

        user?: string;
>user : string
>类型别名 :=> 文字

        password?: string;
>password : string
>类型别名 :=> 文字

        responseType?: string;
>responseType : string
>类型别名 :=> 文字

        headers?: any;
>headers : any
>类型别名 :=> 任意

        customRequestInitializer?: (req: any) => void;
>customRequestInitializer : (req: any) => void
>req : any
>类型别名 :=> 任意

        data?: any;
>data : any
>类型别名 :=> 任意
    }
}

module Services {
>Services : any
>类型别名 :=> 任意

    export interface IRequestService {
>IRequestService : IRequestService

        /**
         * Returns the URL that can be used to access the provided service. The optional second argument can
         * be provided to narrow down the request URL to a specific file system resource. The third argument
         * allows to specify to return a fully absolute server URL. 
         */
        getRequestUrl(service: string, path?: string): string;
>getRequestUrl : { (service: string, path?: string): string; (service: string, path?: string, absolute?: boolean): string; }
>service : string
>类型别名 :=> 文字
>path : string
>类型别名 :=> 文字

        getRequestUrl(service: string, path?: string, absolute?: boolean): string;
>getRequestUrl : { (service: string, path?: string): string; (service: string, path?: string, absolute?: boolean): string; }
>service : string
>类型别名 :=> 文字
>path : string
>类型别名 :=> 文字
>absolute : boolean
>类型别名 :=> 真假

        /**
         * Wraps the call into WinJS.XHR to allow for mocking and telemetry. Use this instead
         * of calling WinJS.XHR directly.
         */
        makeRequest(options: WinJS.IXHROptions): WinJS.Promise;
>makeRequest : (options: WinJS.IXHROptions) => WinJS.Promise
>options : WinJS.IXHROptions
>WinJS : any
>类型别名 :=> 任意
>IXHROptions : WinJS.IXHROptions
>WinJS : any
>类型别名 :=> 任意
>Promise : WinJS.Promise
    }
}

module Errors {
>Errors : typeof Errors

    export class ConnectionError /* extends Error */ {
>ConnectionError : ConnectionError

        constructor(request: XMLHttpRequest) {
>request : XMLHttpRequest
>XMLHttpRequest : XMLHttpRequest
        }
    }
}

module Files {
>Files : any
>类型别名 :=> 任意

    export interface IUploadResult {
>IUploadResult : IUploadResult

        stat: string;
>stat : string
>类型别名 :=> 文字

        isNew: boolean;
>isNew : boolean
>类型别名 :=> 真假
    }
}

interface XMLHttpRequest {
>XMLHttpRequest : XMLHttpRequest

    status: number;
>status : number
>类型别名 :=> 数字

    responseText: string;
>responseText : string
>类型别名 :=> 文字

    statusText: string;
>statusText : string
>类型别名 :=> 文字

}

class FileService {
>FileService : FileService

    private requestService: Services.IRequestService;
>requestService : Services.IRequestService
>Services : any
>类型别名 :=> 任意
>IRequestService : Services.IRequestService

    public uploadData(): WinJS.TPromise<Files.IUploadResult> {
>uploadData : () => WinJS.TPromise<Files.IUploadResult>
>WinJS : any
>类型别名 :=> 任意
>TPromise : WinJS.TPromise<V>
>Files : any
>类型别名 :=> 任意
>IUploadResult : Files.IUploadResult

        var path = "";
>path : string
>类型别名 :=> 文字
>"" : ""

        return this.requestService.makeRequest({
>this.requestService.makeRequest({            url: this.requestService.getRequestUrl('root', path),            type: 'POST',            headers: {},            data: "someData"        }).then((response: XMLHttpRequest) => {                var result: IUploadResult = { // This should be error                    stat: this.jsonToStat(newFilePath, "someString"), // _this needs to be emitted to the js file                    isNew: response.status === 201                };                return WinJS.TPromise.as<Files.IUploadResult>(result);            }, (xhr: XMLHttpRequest) => {                return WinJS.Promise.wrapError(new Errors.ConnectionError(xhr));            }) : WinJS.Promise
>this.requestService.makeRequest({            url: this.requestService.getRequestUrl('root', path),            type: 'POST',            headers: {},            data: "someData"        }).then : (success?: WinJS.ValueCallback, error?: WinJS.ErrorCallback, progress?: WinJS.ProgressCallback) => WinJS.Promise
>this.requestService.makeRequest({            url: this.requestService.getRequestUrl('root', path),            type: 'POST',            headers: {},            data: "someData"        }) : WinJS.Promise
>this.requestService.makeRequest : (options: WinJS.IXHROptions) => WinJS.Promise
>this.requestService : Services.IRequestService
>this : this
>requestService : Services.IRequestService
>makeRequest : (options: WinJS.IXHROptions) => WinJS.Promise
>{            url: this.requestService.getRequestUrl('root', path),            type: 'POST',            headers: {},            data: "someData"        } : { url: string; type: string; headers: {}; data: string; }

            url: this.requestService.getRequestUrl('root', path),
>url : string
>类型别名 :=> 文字
>this.requestService.getRequestUrl('root', path) : string
>类型别名 :=> 文字
>this.requestService.getRequestUrl : { (service: string, path?: string): string; (service: string, path?: string, absolute?: boolean): string; }
>this.requestService : Services.IRequestService
>this : this
>requestService : Services.IRequestService
>getRequestUrl : { (service: string, path?: string): string; (service: string, path?: string, absolute?: boolean): string; }
>'root' : "root"
>path : string
>类型别名 :=> 文字

            type: 'POST',
>type : string
>类型别名 :=> 文字
>'POST' : "POST"

            headers: {},
>headers : {}
>{} : {}

            data: "someData"
>data : string
>类型别名 :=> 文字
>"someData" : "someData"

        }).then((response: XMLHttpRequest) => {
>then : (success?: WinJS.ValueCallback, error?: WinJS.ErrorCallback, progress?: WinJS.ProgressCallback) => WinJS.Promise
>(response: XMLHttpRequest) => {                var result: IUploadResult = { // This should be error                    stat: this.jsonToStat(newFilePath, "someString"), // _this needs to be emitted to the js file                    isNew: response.status === 201                };                return WinJS.TPromise.as<Files.IUploadResult>(result);            } : (response: XMLHttpRequest) => WinJS.TPromise<Files.IUploadResult>
>response : XMLHttpRequest
>XMLHttpRequest : XMLHttpRequest

                var result: IUploadResult = { // This should be error
>result : any
>类型别名 :=> 任意
>IUploadResult : No type information available!
>{ // This should be error                    stat: this.jsonToStat(newFilePath, "someString"), // _this needs to be emitted to the js file                    isNew: response.status === 201                } : { stat: any; isNew: boolean; }

                    stat: this.jsonToStat(newFilePath, "someString"), // _this needs to be emitted to the js file
>stat : any
>类型别名 :=> 任意
>this.jsonToStat(newFilePath, "someString") : any
>类型别名 :=> 任意
>this.jsonToStat : any
>类型别名 :=> 任意
>this : this
>jsonToStat : any
>类型别名 :=> 任意
>newFilePath : any
>类型别名 :=> 任意
>"someString" : "someString"

                    isNew: response.status === 201
>isNew : boolean
>类型别名 :=> 真假
>response.status === 201 : boolean
>类型别名 :=> 真假
>response.status : number
>类型别名 :=> 数字
>response : XMLHttpRequest
>status : number
>类型别名 :=> 数字
>201 : 201

                };

                return WinJS.TPromise.as<Files.IUploadResult>(result);
>WinJS.TPromise.as<Files.IUploadResult>(result) : WinJS.TPromise<Files.IUploadResult>
>WinJS.TPromise.as : <ValueType>(value: ValueType) => WinJS.TPromise<ValueType>
>WinJS.TPromise : typeof WinJS.TPromise
>WinJS : typeof WinJS
>TPromise : typeof WinJS.TPromise
>as : <ValueType>(value: ValueType) => WinJS.TPromise<ValueType>
>Files : any
>类型别名 :=> 任意
>IUploadResult : Files.IUploadResult
>result : any
>类型别名 :=> 任意

            }, (xhr: XMLHttpRequest) => {
>(xhr: XMLHttpRequest) => {                return WinJS.Promise.wrapError(new Errors.ConnectionError(xhr));            } : (xhr: XMLHttpRequest) => WinJS.Promise
>xhr : XMLHttpRequest
>XMLHttpRequest : XMLHttpRequest

                return WinJS.Promise.wrapError(new Errors.ConnectionError(xhr));
>WinJS.Promise.wrapError(new Errors.ConnectionError(xhr)) : WinJS.Promise
>WinJS.Promise.wrapError : (error: any) => WinJS.Promise
>WinJS.Promise : typeof WinJS.Promise
>WinJS : typeof WinJS
>Promise : typeof WinJS.Promise
>wrapError : (error: any) => WinJS.Promise
>new Errors.ConnectionError(xhr) : Errors.ConnectionError
>Errors.ConnectionError : typeof Errors.ConnectionError
>Errors : typeof Errors
>ConnectionError : typeof Errors.ConnectionError
>xhr : XMLHttpRequest

            });
    }
}
